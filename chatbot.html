<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chatbot - Fortella</title>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: "Poppins", sans-serif;
}

html, body {
  height: 100%;
  background-color: #ece5dd;
  display: flex;
  justify-content: center;
  align-items: center;
}

.chat-app {
  background-color: #fff;
  width: 100%;
  max-width: 420px;
  height: 100%;
  display: flex;
  flex-direction: column;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 4px 20px rgba(0,0,0,0.2);
}

/* Header */
.chat-header {
  background-color: #075e54;
  color: white;
  padding: 14px;
  display: flex;
  align-items: center;
  gap: 10px;
  flex-shrink: 0;
}

.chat-user img {
  width: 45px;
  height: 45px;
  border-radius: 50%;
}

.chat-info h2 {
  font-size: 18px;
  font-weight: 600;
}

.chat-info p {
  font-size: 13px;
  color: #cce3d4;
}

/* Chat */
.chat-box {
  flex: 1;
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  overflow-y: auto;
  scroll-behavior: smooth;
  background: url("img/chatbot1.jpg") repeat;
}

/* Mensagens */
.message {
  display: flex;
  max-width: 80%;
  animation: fadeIn 0.3s ease;
  word-break: break-word;
}

.message.bot {
  justify-content: flex-start;
}

.message.user {
  justify-content: flex-end;
  align-self: flex-end;
}

.bubble {
  padding: 12px 16px;
  border-radius: 20px;
  position: relative;
  font-size: 14px;
}

.message.bot .bubble {
  background-color: #fff;
  border-bottom-left-radius: 4px;
}

.message.user .bubble {
  background-color: #dcf8c6;
  border-bottom-right-radius: 4px;
}

.bubble .time {
  font-size: 10px;
  color: gray;
  text-align: right;
  display: block;
  margin-top: 4px;
}

/* Input */
.chat-input {
  display: flex;
  align-items: center;
  padding: 10px;
  background-color: #f0f0f0;
  gap: 8px;
  flex-shrink: 0;
}

.chat-input input {
  flex: 1;
  padding: 12px 15px;
  border-radius: 25px;
  border: 1px solid #ccc;
  outline: none;
  font-size: 15px;
}

.chat-input button {
  background-color: #00a884;
  border: none;
  border-radius: 50%;
  width: 50px;
  height: 50px;
  font-size: 22px;
  color: white;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: 0.2s;
}

.chat-input button:hover {
  background-color: #009873;
}

/* Digitando */
.typing {
  background-color: #fff;
  padding: 8px 12px;
  border-radius: 16px;
  width: fit-content;
  animation: fadeIn 0.3s ease;
  margin-left: 10px;
}

.dot {
  width: 6px;
  height: 6px;
  background: #999;
  border-radius: 50%;
  margin: 0 2px;
  display: inline-block;
  animation: blink 1.4s infinite both;
}

.dot:nth-child(2) { animation-delay: 0.2s; }
.dot:nth-child(3) { animation-delay: 0.4s; }

@keyframes blink {
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(5px); }
  to { opacity: 1; transform: translateY(0); }
}
</style>
</head>
<body>

<div class="chat-app">
  <header class="chat-header">
    <div class="chat-user">
      <img src="img/chatbot1.jpg" alt="Bot">
      <div class="chat-info">
        <h2>Chatbot</h2>
        <p id="status">Online</p>
      </div>
    </div>
  </header>

  <main class="chat-box" id="chat-box">
    <div class="message bot">
      <div class="bubble">
        <p>Ol√°! Como posso te ajudar hoje? üôÇ</p>
        <span class="time">23:40</span>
      </div>
    </div>
  </main>

  <footer class="chat-input">
    <input type="text" id="userInput" placeholder="Digite sua mensagem...">
    <button id="sendBtn">‚û§</button>
  </footer>
</div>

<script>
const chatBox = document.getElementById("chat-box");
const userInput = document.getElementById("userInput");
const sendBtn = document.getElementById("sendBtn");
const statusText = document.getElementById("status");

function getTime() {
  const now = new Date();
  return now.toLocaleTimeString([], { hour: "2-digit", minute: "2-digit" });
}

function addMessage(text, sender) {
  const msg = document.createElement("div");
  msg.classList.add("message", sender);

  const bubble = document.createElement("div");
  bubble.classList.add("bubble");
  bubble.innerHTML = `<p>${text}</p><span class="time">${getTime()}</span>`;
  msg.appendChild(bubble);

  chatBox.appendChild(msg);
  chatBox.scrollTop = chatBox.scrollHeight;
}

function showTyping() {
  const typingDiv = document.createElement("div");
  typingDiv.classList.add("typing");
  typingDiv.innerHTML = `<div class="dot"></div><div class="dot"></div><div class="dot"></div>`;
  chatBox.appendChild(typingDiv);
  chatBox.scrollTop = chatBox.scrollHeight;
  return typingDiv;
}

function botReply(userText, typingDiv) {
  typingDiv.remove();
  statusText.innerText = "Digitando...";

  let response = "Desculpe, n√£o entendi. Pode explicar melhor?";
  userText = userText.toLowerCase();

  // Sauda√ß√µes
  if (userText.includes("ol√°") || userText.includes("oi") || userText.includes("bom dia") || userText.includes("boa tarde") || userText.includes("boa noite")) {
    response = "Ol√°! üòä Como posso te ajudar hoje?";
  }
  // Pedidos de ajuda
  else if (userText.includes("ajuda") || userText.includes("socorro") || userText.includes("emerg√™ncia")) {
    response = "Claro! Me conte o que aconteceu para que eu possa ajudar. ‚ö†Ô∏è";
  }
  // Roubo / Assalto
  else if (userText.includes("roub") || userText.includes("assalto")) {
    response = "Sinto muito üò¢. Deseja que eu envie um alerta para seus contatos de emerg√™ncia?";
  }
  // Confirma√ß√µes
  else if (userText.includes("sim") || userText.includes("ok")) {
    response = "üö® Alerta enviado! Fique em local seguro at√© a ajuda chegar.";
  }
  else if (userText.includes("n√£o")) {
    response = "Tudo bem, estou aqui se precisar de algo mais üôÇ";
  }
  // Agradecimentos
  else if (userText.includes("obrigad") || userText.includes("valeu")) {
    response = "De nada üíõ. Estou sempre aqui para ajudar!";
  }
  // Perguntas sobre o bot
  else if (userText.includes("quem √© voc√™") || userText.includes("seu nome")) {
    response = "Eu sou seu assistente virtual da Fortella ü§ñ.";
  }
  else if (userText.includes("o que voc√™ faz")) {
    response = "Posso te ajudar em situa√ß√µes de emerg√™ncia e fornecer informa√ß√µes r√°pidas. üõ°Ô∏è";
  }
  // Perguntas gerais
  else if (userText.includes("clima") || userText.includes("tempo")) {
    response = "N√£o consigo informar o clima real, mas √© sempre bom estar preparado! ‚òÄÔ∏èüåßÔ∏è";
  }
  else if (userText.includes("hora") || userText.includes("que horas")) {
    response = `Agora s√£o ${getTime()} ‚è∞`;
  }
  // Mensagens curtas
  else if (userText.length < 3) {
    response = "Pode escrever um pouco mais? üòÖ";
  }

  setTimeout(() => {
    addMessage(response, "bot");
    statusText.innerText = "Online";
  }, 800);
}

sendBtn.addEventListener("click", () => {
  const text = userInput.value.trim();
  if (!text) return;

  addMessage(text, "user");
  userInput.value = "";

  const typingDiv = showTyping();
  setTimeout(() => botReply(text, typingDiv), 1200);
});

userInput.addEventListener("keypress", e => {
  if (e.key === "Enter") sendBtn.click();
});
</script>
</body>
</html>

